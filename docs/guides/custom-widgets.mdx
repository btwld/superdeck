---
title: Custom Widgets Guide
description: Learn how to create and use custom Flutter widgets in SuperDeck presentations
---

# Custom Widgets Guide

Render custom Flutter widgets from Markdown. Register widgets in `DeckOptions.widgets`, then use them in `slides.md`.

## Markdown Syntax

Two equivalent forms:

- **Shorthand (recommended)** - `@twitter { ... }`
- **Explicit** - `@widget { name: "twitter" ... }`

All properties pass to `WidgetDefinition.parse()` as arguments.

## 1) Create a `WidgetDefinition`

### Simple: Map args (no validation)

```dart
import 'package:flutter/widgets.dart';
import 'package:superdeck/superdeck.dart';

class TwitterWidgetDefinition extends WidgetDefinition<Map<String, Object?>> {
  const TwitterWidgetDefinition();

  @override
  Map<String, Object?> parse(Map<String, Object?> args) => args;

  @override
  Widget build(BuildContext context, Map<String, Object?> args) {
    final username = args['username'] as String? ?? '';
    final tweetId = args['tweetId'] as String? ?? '';
    return Text('Twitter: @$username ($tweetId)');
  }
}
```

### Recommended: Typed args with validation

Validate and convert the raw map to a typed args object in `parse()`. Use `Ack` (from `superdeck_core`) for schema validation.

```dart
import 'package:flutter/widgets.dart';
import 'package:superdeck/superdeck.dart';

class TwitterArgs {
  const TwitterArgs({required this.username, required this.tweetId});

  final String username;
  final String tweetId;

  static final schema = Ack.object({
    'username': Ack.string().notEmpty(),
    'tweetId': Ack.string().notEmpty(),
  });

  static TwitterArgs parse(Map<String, Object?> map) {
    schema.parse(map);
    return TwitterArgs(
      username: map['username'] as String,
      tweetId: map['tweetId'] as String,
    );
  }
}

class TwitterDefinition extends WidgetDefinition<TwitterArgs> {
  const TwitterDefinition();

  @override
  TwitterArgs parse(Map<String, Object?> args) => TwitterArgs.parse(args);

  @override
  Widget build(BuildContext context, TwitterArgs args) {
    return Text('Twitter: @${args.username} (${args.tweetId})');
  }
}
```

## 2) Register in `DeckOptions`

```dart
import 'package:flutter/widgets.dart';
import 'package:superdeck/superdeck.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await SuperDeckApp.initialize();

  runApp(
    SuperDeckApp(
      options: DeckOptions(
        widgets: const {
          'twitter': TwitterWidgetDefinition(),
        },
      ),
    ),
  );
}
```

## 3) Use in `slides.md`

Shorthand:

```markdown
@twitter {
  username: "flutterdev"
  tweetId: "1234567890"
}
```

Explicit:

```markdown
@widget {
  name: "twitter"
  username: "flutterdev"
  tweetId: "1234567890"
}
```

## Access Block and Slide Context

In `WidgetDefinition.build()`:

- `BlockConfiguration.of(context)` - Block size, alignment, slide spec
- `SlideConfiguration.of(context)` - Slide index, options, metadata

```dart
@override
Widget build(BuildContext context, TwitterArgs args) {
  final block = BlockConfiguration.of(context);
  final slide = SlideConfiguration.of(context);

  return SizedBox(
    width: block.size.width,
    height: block.size.height,
    child: Text('Slide ${slide.slideIndex + 1}: @${args.username}'),
  );
}
```

## Troubleshooting

- **"Widget not found"** - Verify the name is registered in `DeckOptions.widgets`
- **Parse/build errors** - SuperDeck renders error details with stack trace on slide

## Notes

- Built-in widgets (`image`, `dartpad`, `qrcode`) are always available
- Override built-in widgets by registering the same name
